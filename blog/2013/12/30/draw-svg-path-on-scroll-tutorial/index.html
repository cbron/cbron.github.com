
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>draw svg path on scroll tutorial - Cable Codes</title>
  <meta name="author" content="cbron">

  
  <meta name="description" content="The &#8221;Russia Left Behind&#8221; article caught my attention a few months ago and I fell in love with it, especially the two maps.
I will quickly &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cbron.github.com/blog/2013/12/30/draw-svg-path-on-scroll-tutorial/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Cable Codes" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43046341-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Cable Codes</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:cbron.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Draw Svg Path on Scroll Tutorial</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-30T12:40:00-07:00" pubdate data-updated="true">Dec 30<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>The &#8221;<a href="http://www.nytimes.com/newsgraphics/2013/10/13/russia/?ref=global-home">Russia Left Behind</a>&#8221; article caught my attention a few months ago and I fell in love with it, especially the two maps.
I will quickly go over one way to draw a line on user scroll, although this way is different from the way the New York Times did it. From the looks of it they used <a href="https://github.com/mbostock/topojson">TopoJSON</a>.</p>

<p><a href="http://www.calebbron.com/stuff/svg.html">Demo</a></p>

<p>There&#8217;s two pieces in building this line. First is creating the SVG and second is drawing it on an html page.</p>

<h3>SVG</h3>

<p>I used illustrator but I believe inkscape would work as well. All you need is the <code>&lt;svg&gt;</code> code. Inside Illustrator use the pen tool to draw a line or shape. The tough part is making sure that all the points stay part of a single path, which results in a single <code>&lt;svg&gt;</code> block. When your done hit &#8220;save as&#8221; and change the type to .svg then click save and click &#8220;Show SVG Code&#8221;, or just save it and open it in a code editor. You should be able to extract a single code block, mine looks like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;svg</span> <span class="na">version=</span><span class="s">&quot;1.1&quot;</span> <span class="na">id=</span><span class="s">&quot;Layer_1&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="na">xmlns:xlink=</span><span class="s">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="na">x=</span><span class="s">&quot;0px&quot;</span> <span class="na">y=</span><span class="s">&quot;0px&quot;</span> <span class="na">width=</span><span class="s">&quot;800px&quot;</span> <span class="na">height=</span><span class="s">&quot;400px&quot;</span> <span class="na">viewBox=</span><span class="s">&quot;0 200 800 400&quot;</span> <span class="na">enable-background=</span><span class="s">&quot;new 0 200 800 400&quot;</span> <span class="na">xml:space=</span><span class="s">&quot;preserve&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;g</span> <span class="na">id=</span><span class="s">&quot;Layer_2&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;g&gt;</span>
</span><span class='line'>    <span class="nt">&lt;g&gt;</span>
</span><span class='line'>      <span class="nt">&lt;path</span> <span class="na">fill=</span><span class="s">&quot;none&quot;</span> <span class="na">stroke=</span><span class="s">&quot;#E01F26&quot;</span> <span class="na">stroke-width=</span><span class="s">&quot;4&quot;</span> <span class="na">stroke-linecap=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-linejoin=</span><span class="s">&quot;round&quot;</span> <span class="na">d=</span><span class="s">&quot;M329.435,255.494</span>
</span><span class='line'><span class="s">        c125.977,108.275,37.064,167.75,73.58,263.252&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/g&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/g&gt;</span>
</span><span class='line'><span class="nt">&lt;/g&gt;</span>
</span><span class='line'><span class="nt">&lt;/svg&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>HTML/jQuery</h3>

<p>Paste your code into an html document with some spacing around it so you can scroll, then include jquery. Here&#8217;s the scrolling code:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">//On scroll call the draw function</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">scroll</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">drawLines</span><span class="p">();</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//If you have more than one SVG per page this will pick it up</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">drawLines</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">val</span><span class="p">){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">drawLine</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">line</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//draw the line</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">drawLine</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">line</span><span class="p">){</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">pathLength</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">getTotalLength</span><span class="p">();</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">distanceFromTop</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">();</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">percentDone</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nx">distanceFromTop</span> <span class="o">/</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">height</span><span class="p">());</span>
</span><span class='line'>  <span class="nx">length</span> <span class="o">=</span> <span class="nx">percentDone</span> <span class="o">*</span> <span class="nx">pathLength</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">line</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">strokeDasharray</span> <span class="o">=</span> <span class="p">[</span><span class="nx">length</span><span class="p">,</span><span class="nx">pathLength</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;strokeDasharray: &quot;</span><span class="o">+</span><span class="p">[</span><span class="nx">length</span><span class="p">,</span><span class="nx">pathLength</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">));</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The basic idea in the drawLine() function is to calculate the percentage of distance the container is from the top of the viewport and then draw the line based on that percentage. The <code>line.style.strokeDasharray</code> is where the real magic happens.</p>

<p>Now everytime you scroll, the new height percentage is caluclated and that amount of the line is drawn onto the svg.</p>

<p>Tada!</p>

<p>From here its easy to play with the actual SVG code and change the colors or distance of the path.</p>

<h3>Resources</h3>

<p><a href="http://stackoverflow.com/a/14282391/552036">http://stackoverflow.com/questions/14275249/how-can-i-animate-a-progressive-drawing-of-svg-path</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">cbron</span></span>

      








  


<time datetime="2013-12-30T12:40:00-07:00" pubdate data-updated="true">Dec 30<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://cbron.github.com/blog/2013/12/30/draw-svg-path-on-scroll-tutorial/" data-via="calebbron" data-counturl="http://cbron.github.com/blog/2013/12/30/draw-svg-path-on-scroll-tutorial/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/10/09/reload-page-and-add-param-on-checkbox-click-with-rails/" title="Previous Post: Reload page and add param on checkbox click with Rails">&laquo; Reload page and add param on checkbox click with Rails</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/03/25/auto-merge-pull-requests-on-github-except-the-master-branch/" title="Next Post: auto merge pull requests on github except the master branch">auto merge pull requests on github except the master branch &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/07/03/versioning-a-flask-restful-api/">Versioning a Flask-Restful api</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/25/auto-merge-pull-requests-on-github-except-the-master-branch/">auto merge pull requests on github except the master branch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/30/draw-svg-path-on-scroll-tutorial/">draw svg path on scroll tutorial</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/09/reload-page-and-add-param-on-checkbox-click-with-rails/">Reload page and add param on checkbox click with Rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/18/deploy-via-github-on-pull-request-merge/">deploy via github on pull request merge</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Sticky</h1>
  <p><a href="https://www.evernote.com/shard/s182/sh/8b392a93-e5bf-4160-959d-f18f8bf22bee/a9d542dc20090b3cfd74d62fe4b1ae6d" target="_blank">Linux Cheatsheet</a></p>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/cbron">@cbron</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'cbron',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("calebbron", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/calebbron" class="twitter-follow-button" data-show-count="false">Follow @calebbron</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - cbron -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'cablecodes';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://cbron.github.com/blog/2013/12/30/draw-svg-path-on-scroll-tutorial/';
        var disqus_url = 'http://cbron.github.com/blog/2013/12/30/draw-svg-path-on-scroll-tutorial/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
